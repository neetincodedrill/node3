<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>
        file data
    </title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>

    <form enctype="multipart/form-data">
        <input type="text" name="first_name" id="first_name" placeholder="first_name" required />
        <input type="text" name="last_name" id="last_name" placeholder="last_name" required />
        <input type="email" name="email" id="email" placeholder="email" required />
        <select id="age" name="age" class="age" required>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="24">24</option>
        </select>
        <select name="gender" id="gender" required>
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select>
        <select id="city" name="city" class="city" required>
            <option value="Chandigarh">Chandigarh</option>
            <option value="Mohali">Mohali</option>
            <option value="Zirkpur">Zirkpur</option>
            <option value="Ambala">Ambala</option>
        </select>
        <input id="file" type="file" name="file" required/></br>
        <button type="submit" id="submit" class="button">Submit</button>
    </form>

    <script>
        $(document).ready(function () {
            $('form').submit(function (e) {
                e.preventDefault();
                if (first_name != '' && last_name != '' && age != '' && gender != '' && city != '' && email != '') {
                    var first_name = document.getElementById('first_name').value;
                    var last_name = document.getElementById('last_name').value;
                    var age = document.getElementById('age').value;
                    var gender = document.getElementById('gender').value;
                    var city = document.getElementById('city').value;
                    var email = document.getElementById('email').value;
                    var file = document.getElementById('file');

                    var formData = new FormData();
                    formData.append('file',file.files[0])
                    formData.append('first_name',first_name)
                    formData.append('last_name',last_name)
                    formData.append('age',age);
                    formData.append('gender',gender);
                    formData.append('city',city);
                    formData.append('email',email);
                    console.log(formData)
                    var type = file.files[0].type
                    // Display the values
                    for (var value of formData.values()) {
                        console.log(value);
                    }
                    if(type === 'image/png' || type === 'image/jpg'){
                        var xhttp = new XMLHttpRequest();
                    //set post method 
                    xhttp.open('POST', "http://localhost:7000/", true);

                    //call on request change state
                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            alert('Insert successfully')
                        }
                    };
                    //content-type
                    xhttp.setRequestHeader('Content-Type', 'multipart/form-data');
                    //send request with data
                    xhttp.send(formData)
                    }  
                    else{
                        alert('file type is wrong')
                    }           
                }
            })
        })
    </script>
</body>

</html>